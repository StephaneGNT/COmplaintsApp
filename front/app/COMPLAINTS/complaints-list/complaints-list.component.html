<div class="container">
  <div class="row">
    <div class="col-xs-12 col-lg-12">
      <h3 style="margin-bottom:25px">COMPLAINTS</h3>
      <table class="table table-hover table-striped">
        <thead class="thead-dark">
          <tr>
              <th class="d-none d-md-table-cell align-middle text-center">Theme</th>
              <th class="d-none d-md-table-cell align-middle text-center">Title</th>
              <th class="d-none d-md-table-cell align-middle text-center">Author</th>
              <th class="d-none d-md-table-cell align-middle text-center">Date</th>
              <th class="d-none d-md-table-cell align-middle text-center">Status</th>
              <th class="d-none d-md-table-cell align-middle text-center">Receipients</th>
              <th class="d-none d-md-table-cell align-middle text-center">Last answer date</th>
              <th></th>
              <th></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let complaint of complaints | complaintsFilter : loggedUser : displayStatus" [routerLink]="['/complaints/'+complaint.id]">
            <td class="d-none d-md-table-cell align-middle"> {{complaint.theme}}</td>
            <td class="d-none d-md-table-cell align-middle"> {{complaint.title}}</td>
            <td class="d-none d-md-table-cell align-middle">{{complaint.author.firstName}} {{complaint.author.lastName}}</td>
            <td class="d-none d-md-table-cell align-middle text-center">{{complaint.messages[0].date | date:'dd/MM/yy'}}</td>
            <td class="d-none d-md-table-cell align-middle">{{complaint.status}}</td>
            <td class="d-none d-md-table-cell align-middle">
              <p *ngFor="let recipient of complaint.recipients" class="align-middle">{{recipient.firstName}} {{recipient.lastName}}</p>
            </td>
            <td class="d-none d-md-table-cell align-middle text-center">{{complaint.messages[complaint.messages.length-1].date | date:'dd/MM/yy'}}</td>
          <!--      <p *ngFor="let message of complaint.messages | slice:1">{{message.date | date:'dd/MM/yy'}}</p>
            </td>-->
            <td class="align-middle"><button [routerLink]="['/complaints/'+complaint.id]">✎</button></td>
            <td class="align-middle"><button (click)=eraseComplaint(complaint.id) [disabled]="loggedUser.status!='Admin'">✗</button></td>
          </tr>
        </tbody>
      </table>
      <button [routerLink]="['/complaints/new']" class="btn" style="margin-top:25px">I feel like couining</button>
    </div>
  </div>
</div>